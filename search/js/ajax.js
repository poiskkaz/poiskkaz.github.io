var uu = '<table><tr><td></td><td><div id="uu"></div></td><td></td><td><a href="#" onClick="showс(\'lang\',\'la3\');return false;" id="la3">на русском языке</a><span id="img_opt"><a href="#" onClick="showс(\'img_s\',\'img3\');return false;" id="img3">любого размера</a></span></td><td><img src=\'images/l.png\' width=11 height=9 id="un2" /></td> <td><div id="un"><a href="#" onClick="showс(\'file\',\'ffa2\');return false;" id="ffa2">любого формата</a></div></td><td><img src=\'images/l.png\' width=11 height=9 /></td> <td><a href="#" onClick="showс(\'adv\',\'adv2\');return false;" id="adv2">на странице</a></td></tr><tr><td></td><td><div id="reg" class="sw" style="_height:135px;">	<ul>		<li onClick="fcou(this,\'ru\')">в России</li><li onClick="fcou(this,\'alls\')">в мире</li>					<li onClick="fcou(this,\'ua\')"> в Украине</li>		<li onClick="fcou(this,\'by\')"> в Белоруссии</li>		<li style=\'font-size:11px;text-align:center;\' id="eja" onMouseOver="$b(\'datc\').style.display=\'\';this.style.display=\'none\'">Другие страны <span>&darr;</span></li>	</ul>	</ul>		<span id=datc style="display:none;">		<ul>		<li onClick="fcou(this,\'az\')">в Азербайджане</li>		<li onClick="fcou(this,\'am\')">в Армении</li>		<li onClick="fcou(this,\'be\')"> в Бельгии</li>		<li onClick="fcou(this,\'br\')"> в Бразилии</li>		<li onClick="fcou(this,\'va\')"> в Ватикане</li>		<li onClick="fcou(this,\'gb\')"> в Великобритании</li>		<li onClick="fcou(this,\'de\')"> в Германии</li>		<li onClick="fcou(this,\'gr\')"> в Греции</li>		<li onClick="fcou(this,\'eg\')"> в Египете</li>		<li onClick="fcou(this,\'in\')"> в Индии</li>		<li onClick="fcou(this,\'es\')"> в Испании</li>		<li onClick="fcou(this,\'it\')"> в Италии</li>		<li onClick="fcou(this,\'md\')"> в Молдове</li>		<li onClick="fcou(this,\'cn\')"> в Китае</li>		<li onClick="fcou(this,\'kg\')"> в Кыргызстане</li>		<li onClick="fcou(this,\'pl\')"> в Польше</li>		<li onClick="fcou(this,\'pt\')"> в Португалии</li>		<li onClick="fcou(this,\'ro\')"> в Румынии</li>		<li onClick="fcou(this,\'tg\')"> в Таджикистане</li>		<li onClick="fcou(this,\'tm\')"> в Туркменистане</li>		<li onClick="fcou(this,\'tr\')"> в Турции</li>		<li onClick="fcou(this,\'uz\')"> в Узбекистане</li>		<li onClick="fcou(this,\'jr\')"> в Японии</li>				</ul></span></div></td><td></td><td><div id="lang" class="sw" style="_height:137px;">	<ul>		<li onClick="flan(this,\'ru\')">на русском языке</li>	<li onClick="flan(this,\'alls\')"> на любом</li>			<li onClick="flan(this,\'en\')">  на английском</li>		<li onClick="flan(this,\'uk\')"> на украинском</li>		<li onClick="flan(this,\'be\')"> на белорусском</li><li style=\'font-size:11px;text-align:center;\' id="ejx" onMouseOver="$b(\'dats\').style.display=\'\';this.style.display=\'none\'">Другие языки <span>&darr;</span></li>		</ul>		<span id=dats style="display:none;">		<ul>						<li onClick="flan(this,\'ar\')">на арабском</li>		<li onClick="flan(this,\'ru\')">на болгарском</li>		<li onClick="flan(this,\'el\')">на греческом</li>		<li onClick="flan(this,\'nl\')">на голландском</li>		<li onClick="flan(this,\'iw\')">на иврите</li>		<li onClick="flan(this,\'es\')">на испанском</li>		<li onClick="flan(this,\'it\')">на итальянском</li>		<li onClick="flan(this,\'zh-CN\')">на китайском</li>		<li onClick="flan(this,\'ko\')">на корейском</li>		<li onClick="flan(this,\'de\')">на немецком</li>		<li onClick="flan(this,\'pt\')">на португальском</li>		<li onClick="flan(this,\'fa\')">на персидском</li>		<li onClick="flan(this,\'pl\')">на польском</li>		<li onClick="flan(this,\'th\')">на тайском</li>		<li onClick="flan(this,\'tr\')">на турецком</li>		<li onClick="flan(this,\'ro\')">на румынском</li>		<li onClick="flan(this,\'fi\')">на финском</li>		<li onClick="flan(this,\'fr\')">на французском</li>		<li onClick="flan(this,\'cs\')">на чешском</li>		<li onClick="flan(this,\'sv\')">на шведском</li>		<li onClick="flan(this,\'ja\')">на японском</li>				</ul></span></div><div id="img_s" class="sw">	<ul>		<li onClick="fimg(this,\'\')"> любого размера</li>		<li onClick="fimg(this,\'icon\')"> Маленькие</li>		<li onClick="fimg(this,\'small%7Cmedium%7Clarge%7Cxlarge\')"> Средние</li>		<li onClick="fimg(this,\'xxlarge\')"> Большие</li>		<li onClick="fimg(this,\'huge\')"> Очень большие</li>		</ul></div></td><td></td><td><div id="file" class="sw" style="width:225px;"><ul><li onClick="ffil(this,\'\')">любого формата</li>		<li onClick="ffil(this,\'txt\')">Текстовые документы (.txt)</li>		<li onClick="ffil(this,\'rss\')">Really Simple Syndication (.rss)</li>		<li onClick="ffil(this,\'doc\')">Microsoft Word (.doc)</li>		<li onClick="ffil(this,\'xls\')">Microsoft Excel (.xls)</li>		<li onClick="ffil(this,\'ppt\')">Microsoft Powerpoint (.ppt)</li>		<li onClick="ffil(this,\'pdf\')">Adobe Acrobat PDF (.pdf)</li>		<li onClick="ffil(this,\'xml\')">eXtensible Markup Lang (.xml)</li>		<li onClick="ffil(this,\'rtf\')">Rich Text Format (.rtf)</li>		<li onClick="ffil(this,\'swf\')">Shockwave Flash (.swf)</li>		<li onClick="ffil(this,\'ps\')">Adobe Postscript (.ps)</li>		<li onClick="ffil(this,\'dwf\')">Autodesk DWF (.dwf)</li>		<li onClick="ffil(this,\'kml\')">Google Земля KML (.kml)</li>		<li onClick="ffil(this,\'kmz\')">Google Земля KMZ (.kmz)</li>	</ul></div></td><td></td><td><div id="adv" class="sw" style="width:100px;min-width:100px;_height:113px;">	<ul>		<li onClick="fadv(this,\'\')"> на странице</li>		<li onClick="fadv(this,\'allintitle:\')"> в заголовке</li>		<li onClick="fadv(this,\'allintext:\')">в тексте</li>		<li onClick="fadv(this,\'allinurl:\')">в адресе</li>		<li onClick="fadv(this,\'allinanchor:\')">в ссылках</li>	</ul></div></td></tr></table>';

var uua=0;
function dateto(value){
	var monthNames = new Array( 'Января','Февраля','Марта','Апреля','Мая','Июня','Июля','Августа','Сентября','Октября','Ноября','Декабря');
	var dayNames = new Array( 'Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота');
	var now = new Date(value);
	thisYear = now.getFullYear();
	hour = now.getHours();
	if(hour<10){hour = '0'+hour;}
	min = now.getMinutes();
	if(min<10){min = '0'+min;}
	sec = now.getSeconds();
	if(sec<10){sec = '0'+sec;}
	return(dayNames[now.getDay()] + ', ' + now.getDate() + ' ' + monthNames[now.getMonth()] + ' ' + thisYear + ' года в '+hour+':'+min+':'+sec);
}
function s_to_m(v){
	d = v/60;
	min = Math.ceil(d);
	sec = v-(min*60);
	if(sec<0){
		min = min-1; sec = v-(min*60);
	}
	if(min<1){
		return(sec+' сек');
	}else{
		return(min+' мин '+sec+' сек');
	}
}
function getCookie(name) {
        var prefix = name + "="
        var cookieStartIndex = document.cookie.indexOf(prefix)
        if (cookieStartIndex == -1)
                return null
        var cookieEndIndex = document.cookie.indexOf(";",
                        cookieStartIndex + prefix.length)
        if (cookieEndIndex == -1)
                cookieEndIndex = document.cookie.length
        return decodeURIComponent(document.cookie.substring(
              cookieStartIndex + prefix.length, cookieEndIndex))
}
//

function cookie_add(s,q,t){
	var f = "; expires=Wed, 01-Jan-2020 00:00:00 GMT";
	co = getCookie("q");
	if(co){
		var qa = co.split('|*');
		if(qa.length>20){
			qa.pop();
		}
		co2="|*"+co+"|*";
		ghz = co2.replace("|*"+q+"^|"+s+"^|"+t+"|*","");
		if(co2==ghz){
			coki = qa.join("|*");
			document.cookie="q="+encodeURIComponent(q)+"^|"+s+"^|"+t+"|*"+encodeURIComponent(coki)+f;
		}
	}
	else{
		document.cookie="q="+encodeURIComponent(q)+"^|"+s+"^|"+t+f;
	}
}

function get_opt(t){

	co = getCookie(t);
	if(!co || co=="0"){
		window.opt[t] = 0;
	}else{
		window.opt[t] = 1;
	}
}
function get_optv(t,n){
	if(t==0){
		$b('oscroll').checked = true
	}
	if(n==0){$b('odebug').checked=true;}
}
function set_opt(t){
	var f = "; expires=Wed, 01-Jan-2020 00:00:00 GMT";
	if(document.getElementById(t).checked == false){
		document.cookie=t+"=1"+f;
		window.opt[t] = 1;
		
	}else{
		document.cookie=t+"=0"+f;
		window.opt[t] = 0;
	}

}
function cookied(){
	document.cookie="q=";
	$("#qs").slideToggle("normal");
}
function cookie_r(){
	coo = getCookie("q");
if(coo){
	all = coo.split('|*');
	var d="";
	for (i=0;i<=all.length-1;i++)
	{
	
	var g="";
		var qa = all[i].split('^|');
		f = qa[2];
var tb = new Array();
tb['images']='картинки';
tb['video']='видео';
tb['blogs']='блоги';
tb['news']='новости';

		if(f!='web'){g="<span> - "+tb[f]+"</span>";}else{g='';}
		e=qa[1];
		var rx;
		if(e=="goz"){m="G:";tx='google';}else if(e=="yaz"){m="Я:";tx='yandex';}else if(e=="biz"){m="B:";tx='bing';}else if(e=="ym"){m="УМ:";tx='ym';}

		d+=m+" <a href='search.html#search:"+tx+":"+f+":"+encodeURIComponent(qa[0])+"' onClick=\"cs('"+qa[0]+"','"+f+"','"+e+"');return false;\">"+qa[0]+"</a>"+g+"<br />";
	}
	d+="<div align=right style='color:#838383'><a href='#' style='font-size:11px;color:#838383' onClick=\"cookie_r();return false;\">скрыть</a> | <a href='#' style='font-size:11px;color:#838383' onClick=\"cookied();return false;\">очистить</a></div>";
}else{d = "<div style='font-size:11px;text-align:center'>&nbsp; Поисковых запросов нет</div><div align=right style='color:#838383'><a href='#' style='font-size:11px;color:#838383' onClick=\"cookie_r();return false;\">скрыть</a></div>";}
	$b("qs").innerHTML = d;
	$("#qs").slideToggle("normal");
	
}

function parseUri (str) {
	var str = str.replace("http://",'');
	var urlparts = str.split('/');
	return(urlparts[0]);
};
load = new Image();
load.src="images/load.gif";
img = '<img src="'+load.src+'" height="16" width="16" style="margin-bottom:-4px">';
function Comma(n) {
var b =n;
var str='';
 if (n%1000) str=(n%1000);
 n =Math.round(n/1000);
 if (n%1000) str=(n%1000)+' тыс. '+str;
 n =Math.round(n/1000);
 if (n%1000) str=(n%1000)+' млн. '+str;
 n =Math.round(n/1000);
 if (n%1000) str=(n%1000)+' млрд. '+str;
 return str;
}
function find(q,s,i,u){
$.ajax({
        url: "http://ajax.googleapis.com/ajax/services/search/web?v=1.0&key=ABQIAAAA9cuS2ToykTODWTgzr5qAuRQxMDBcEALRwwtQ3-ky4PqXSeOE-RSNJ5UfBIDDwMbwsqYZGrr2BtwDtA&q="+encodeURIComponent(q)+" site:"+s+"&rsz=large&callback=Callback&context=?",
        dataType : "jsonp",
        success: function (data) {
			var result = "";
				        $.each(data.results,
        					function(i, val) {
								if(val.unescapedUrl!=u){
		           					url = val.unescapedUrl.replace('http://', "");
									url = Url.decode(url);
									urlc = url.replace(val.visibleUrl, "");
									if(urlc.length>80){
										url =  url.substr(0,80)+"...";
									}
										urlx = url.replace(/\/$/g,"");
										link = decodeURIComponent(val.url);
		        						result += '<li><a href="'+link+'"  target="_blank" style="font-size:14px">'+val.title+"</a><br /><span>"+val.content+"</span><br /><span style='color:#638696;font-size:12px'>"+filet(val.url)+urlx+"</span></li>";
								}
        					}
        				);

					
					
						if(data.cursor.estimatedResultCount != 'undefined'){
							$b("z"+i).innerHTML="<ul id='ebn'><li style='color:#C36B00'>Всего с сайта <b>"+s+"</b>: "+data.cursor.estimatedResultCount+" страниц &nbsp; &nbsp; <a href='#' onClick=\"show('z"+i+"');return false;\" style='color:#4F4F4F'>спрятать</a></li>"+result+"";
							if(data.cursor.estimatedResultCount>8){
								$b("z"+i).innerHTML+="<div align=center><a href='/search:web:"+encodeURIComponent(q)+" site:"+s+"' onClick=\"$('#seq input:radio')[1].checked = true;  $b('q').value+=' site:"+s+"';Google(0,false);return false;\" style='color:#505050'>Ещё результаты с "+s+"</a> &nbsp; &nbsp; <a href='#' onClick=\"show('z"+i+"');return false;\" style='color:#4F4F4F'>спрятать</a></div><br />";
							}
							$b("z"+i).innerHTML += '</ul>';
							show('z'+i);

						}else{
							$b("z"+i).innerHTML="Нет больше результатов с этого сайта.";
						}
		}
				
	});
}
function parse_url(url){
    var rgxp=new RegExp("(http\://.+/)([^/]*)\\.([\\w]*)$","i");
    purl=rgxp.exec(url);
    return purl[2]+'.'+purl[3];
}
	function uc( str ) { 
	    var f = str.charAt(0).toUpperCase();
	    return f + str.substr(1, str.length-1);
	}
function kk(t,q){
t=t.replace(/\<b\>/gi, '');
t=t.replace(/\<\/b\>/gi, '');
var n = q.split(" ");
for(var i in n) {
if(n[i].length>2){
t=t.replace(n[i], '<b>'+n[i]+'</b>');
t=t.replace(uc(n[i]), '<b>'+uc(n[i])+'</b>');
t=t.replace(n[i].toLocaleUpperCase(), '<b>'+n[i].toLocaleUpperCase()+'</b>');
}
}
return t;	
}




function gcc(u){
$b("rez").innerHTML = img+' считаю...';
$.ajax({
		url: u,
			success: function(data){
				if(data.length>5){
					$b("value").innerHTML = data+'<br />';
					
				}else{
					$b("value").innerHTML = "Ошибка в запросе или сервис недоступен...<br />";
						}$("#req").fadeOut("normal");$b("rez").innerHTML ='';
			}
			
		});
}
function tl(s) { var b = s.replace(/^\s+/, ""); return b.replace(/\s+$/, "");}
function rs(s) { return s.replace(/\s+/g, ""); }
function rv(s) { return s.replace(/\s+\s+/g, " "); }

function kk(t,q){
t=t.replace(/\<b\>/gi, '');
t=t.replace(/\<\/b\>/gi, '');
var n = q.split(" ");
for(var i in n) {
if(n[i].length>2){
t=t.replace(n[i], '<b>'+n[i]+'</b>');
t=t.replace(uc(n[i]), '<b>'+uc(n[i])+'</b>');
t=t.replace(n[i].toLocaleUpperCase(), '<b>'+n[i].toLocaleUpperCase()+'</b>');
}
}
return t;	
}

function ajaxTranslate2(textToTranslate, fromLanguage, toLanguage) {
			  
			var p = {};
			p.appid = '5C08C95FC0715E88226405E208BF29D4AAE15FCD';
			p.to = toLanguage;
			p.from = fromLanguage;
			p.text = textToTranslate;
			$.ajax({
				url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Translate',
				data: p,
				dataType: 'jsonp',
				jsonp: 'oncomplete',
				complete: function(request, status) {
					//alert('complete: '+status);
				},
				success: function(data, status) {

					 
$b("value").innerHTML = "<table><tr><td><img src='images/tr.png' height=32 width=32></td><td style='padding-left:10px'><b style='font-size:18px;color:#444444'>Перевод: <br>  <span style='font-size:14px;color:#454545'>"+textToTranslate+" - "+data+"</b></td></tr></table><br />";
						$("#req").fadeOut("normal");
						$b("rez").innerHTML = '';
						
						
				},
				error: function(request, status, error) {
				//	alert('error: status-'+status+',desc-'+error);
				}
			});
			
		} 
function detectbing(text){


    var p = {};
p.appid = '5C08C95FC0715E88226405E208BF29D4AAE15FCD';
p.text = text;
$.ajax({
    url: 'http://api.microsofttranslator.com/V2/Ajax.svc/Detect',
    data: p,
    dataType: 'jsonp',
    jsonp: 'oncomplete',
    jsonpCallback: 'ajaxTranslateCallback',
    success: function(data, status) {
	
	if(data=="ru"){
		ajaxTranslate2(text, data, "en");
						
					}else if(data=="en"){
					ajaxTranslate2(text, data, "ru");
					
					}	else{
						ajaxTranslate2(text, data, "ru");
					}
						

    }
});
}

function qsd(s){
	$b('q').value=$b('q').value+" site:"+s;
	Google(0,false);
}
function Google(start,next) {

var type = $b('type').value;


if(window.uua==1){$("#opt").html(uu);}
window.uua=0;


if(type == "images"){
	
		$b('file').innerHTML = "<ul><li onClick=\"ffil(this,'')\">любого формата</li><li onClick=\"ffil(this,'jpg')\">JPEG file interchange format (.jpg)</li><li onClick=\"ffil(this,'png')\">Portable Network Graphics (.png)</li><li onClick=\"ffil(this,'gif')\">Graphics interchange format (.gif)</li><li onClick=\"ffil(this,'bmp')\">Windows Bitmap (.bmp)</li></ul>";
		$b('la3').style.display='none';
		$b('img_opt').style.display="block";

		window.tcl=true;
	}
	else if(type == "video"){
		$b('file').innerHTML = "<ul><li onClick=\"ffii(this,'')\">любого формата</li></ul>";
		$b('la3').style.display='';
		$b('img_opt').style.display='none';
		window.tcl=true;
	}
	else if(type == "news"){
		$("#opt").html('');
	}
	else if(type == "blogs"){
		$("#opt").html('');
	}
	else{
		if(window.tcl){
			$b('file').innerHTML = fileb;
			$b('la3').style.display='';
			$b('img_opt').style.display='none';
			$b('add').value='';
			$b('imgs').value='';
			$b('ffa2').innerHTML="любого формата";
			$b('ffa2').style.color='#515151';
			window.tcl=false;
		}
	}
	
	
	

	$b('debug').style.display = 'none';
	$b('debug').innerHTML = '';
	
	var q = $b('q').value;
	var qz = q;
if(q != ""){
 
	var names = '';
	var nextr = $b("nextr");
	var value = $b("value");
	var rez = $b("rez");
	var resv = $b("google");
	var add = $b("add").value;
	var add2 = $b("add2").value;
	var imgs = $b("imgs").value;
	var adp = $b("adp").value;
	var cx = $b("cx").value;
	var hl = $b("hl2").value;
	var e = $b("tabx").value;
	var stq = $b('stq').value;
	if(stq==""){
		var st = $("#seq input:radio:checked").val();
	}else{
		var st = stq;
	}
	
			if(type=="maps"){
			if(st=="bz"){stm="bing";}
			if(st=="goz"){stm="google";}
			if(st=="yaz"){stm="yandex";}
			if(st=="bravica"){stm="bravica";}
			if(st=="openstreetmap"){stm="openstreetmap";}
		location.replace("http://maps.YM.kz/"+stm+"_search.php?q="+q);
	}
	 
var not=true;
var h = q.toLowerCase();
h=tl(h);
	var re = /([\d]*)\s?([A-zА-я ]+)\sв\s([A-zА-я ]+)/;
	var mat = h.match(re);
	if(mat){
		var k = /usd|rub|eur|uah|kzt|chf|byr|aud|gbr|dkk|isk|kwd|uzs|mdl|trl|cad|aed|pln|czk|zar|try|huf|lvl|ltl|uah|sek|eek|kgs|nok|cny|sgd|jpy|gbp|рубл|доллар|валют+|деньг+|юан|динар|евро|леев|сом|дирах|лат|лит|зелен|бакс|сша|гривн|тенг|тг|крон|вон|иен|рэндов|форинт|франк|фунт|сум|злоты|лир/;
		if(mat[2].match(k) && mat[3].match(k)){
		if(!mat[1]){mat[1]='1';}
			not=false;
			gcc("/files/cur.php?s="+mat[1]+"&i="+encodeURIComponent(mat[2])+"&v="+encodeURIComponent(mat[3]));
		}
	}
if(!h.match(/[А-я]/)){
	var h2=rs(h);
	if(h2.match(/^([0-9.,\(\^\*\/\\%\-\+\)\:\&\;A-z]+)$/) && !h2.match(/^([0-9]+)$/)){
		if(h2.match(/(abs|acos|acosh|acot|acoth|asin|asinh|atan|atanh|combin |combina|cos|cosh|cot|coth|degrees|even|exp|fact|factdouble|int|iseven|isodd|lcm|lcm_add|ln|log|pi|power|round|sign|sin|sinh|sqrt|sqrtpi|tan|tanh)\(.*\)/)||h2.match(/^([0-9.,\(\^\*\/\\%\-\+\)\:\&\;]+)$/)){
			not=false;
			gcc("/files/calc.php?q="+encodeURIComponent(q));
		}
	}
}	
if(h=="курс" || h=="курс валют"){
	not=false;
	gcc("/files/curo.php");
	
}	
if(q.match(/^перев/)){
var n = q.match(/^перев(од|од:|еди|еди:)\s(.*)/);
var to = "ru";
	if(n){
	$b("rez").innerHTML = img+' перевожу...';
	not=false;
		detectbing(n[2]);
						
					
	}
}
if(h.match(/^whois/)){
var n = h.match(/^whois\s([A-z0-9.]+)/);
	if(n){
	$b("value").innerHTML = img+' получаю данные о <b>'+n[1]+'</b>...<br><br>';
		not=false;
		$.ajax({
		url: "/files/whois.php?q="+encodeURIComponent(n[1]),
			success: function(data){
				if(data.length>5){
					$b("google").innerHTML = data;
					$("#whois").slideToggle("fast");
					$b("value").innerHTML = "<table><tr><td><img src='images/whois.png' height=32 width=32></td><td><b style='font-size:18px;padding-left:10px;color:#444444'>Информация о: "+n[1]+"</b></td></tr></table>";
				}else{
					$b("google").innerHTML = "Ошибка в запросе или сервис недоступен...";
						}$("#req").fadeOut("normal");nextr.innerHTML = '';$b("rez").innerHTML = '';
			}
		});
	}
}
document.title = q+" - поиск в YM.kz Search";
	
	
	 
	if(not){	
	var highlighted = -1;
	if(add != ""){	q = q+" "+add;	}
	if(add2 != ""){	q = q+" "+add2;	}
	if(imgs != ""){	imgs = "imgsz="+imgs+"&";	}
	if(adp != ""){	q = adp+" "+q;	}
	if(cx != ""){	cx = "cx="+cx+"&";	}
	if(next == true){
		nextr.innerHTML = img+' загружаю...';
	}
	else{
		rez.innerHTML = img+' идет поиск...';
		value.innerHTML =  '';
	}
	if(st=='goz'){pq='google';}else if(st=='yaz'){pq='yandex';}else if(st=='biz'){pq='bing';}else if(st=='ym'){pq='ym';}
	document.location = "#search:"+pq+":"+type+":"+q;


var az='';
for (i=0;i<=3;i++){
if(tb[i][2].search(type) != -1){

az +='<li id="'+tb[i][0]+'"';
if(tb[i][0]==st){
az +='class="active"';
if(tb[i][3]==0){$("#opt").hide();}else{$("#opt").show();}
}
az +='><a href="#" onClick="ts2(\''+tb[i][0]+'\',\''+type+'\');return false;"><span>'+tb[i][1]+'</span></a></li>';
}}
$('#stz').html(az);



	start2=0;
	var dq = h;
	var result = "";
	var pj=10;
	if(hl != ""){	hl = "hl="+hl+"&lr=lang_"+hl+"&";	}
if(st=="goz"){
	var url="http://ajax.googleapis.com/ajax/services/search/"+type+"?v=1.0&filter=1&key=ABQIAAAA9cuS2ToykTODWTgzr5qAuRQxMDBcEALRwwtQ3-ky4PqXSeOE-RSNJ5UfBIDDwMbwsqYZGrr2BtwDtA&q="+encodeURIComponent(q)+"&rsz=large&start="+start+"&"+cx+hl+gl+imgs+"&callback=Callback&hl=ru&lr=lang_ru&context=?";
	pj=8;
	
	

	}
	else if(st=="yaz"){
		
			var url="http://ym.kz/yandex/"+type+".php?query="+encodeURIComponent(q)+"&start="+start+"&"+hl+"&callback=Callback&context=?";
			//var url="http://bravica/yandex/"+type+".php?query="+encodeURIComponent(q)+"&start="+start+"&"+hl+"&callback=Callback&context=?";
			$('#uu,#uu2').hide();
	}
	else if(st=="biz"){
		if(type=='images'){pj=16;}
			var url="http://ym.kz/bing/"+type+".php?query="+encodeURIComponent(q)+"&start="+start+"&"+gl+hl+"&callback=Callback&context=?";
			//var url="http://bravica/bing/"+type+".php?query="+encodeURIComponent(q)+"&start="+start+"&"+gl+hl+"&callback=Callback&context=?";
			
	}else if(st=="ym"){
	
		if(type=="web"){
		
			var url="http://ym.kz/ym/web.php?q="+encodeURIComponent(q)+"&start="+start+"&callback=Callback&context=?";
			//alert(url);
			
			
			pj=15;
		}
	}
q=dq;
$("#req").html('');


	 $.ajax({  
  url: url,  
  dataType: 'jsonp',  
  async: false,  
  success: function(data){ 

			var res=data.cursor.estimatedResultCount;
			var yandr=data.cursor.Y;
			var googr=data.cursor.G;
			var bingr=data.cursor.B;
			if(next == false){
			
			//if( st=='yaz'){
				//result += "<div id='yl'><img src='images/yandex.png' width=52 height=21 style='margin-top:-5px;' align=left> &nbsp; нашел //результатов "+res+"</div>";
			//	}
			}
			switch (type) {    						    
				    case 'images':
						result += '<br /><ul class="gallery" id="galq">';
				        $.each(data.results,
        					function(i, val) {
								
								widthi=val.width;
								heighti=val.height;
								widtht=val.tbWidth;
								heightt=val.tbHeight;
								turl=val.tbUrl;
								vurl=val.visibleUrl;
								title=val.titleNoFormatting;
								curl=val.originalContextUrl;
								url=val.unescapedUrl;
								text=val.content;
								
									if(st!="biz"){
									text=val.content;
								}else{text=kk(val.content,q);}
								
								
								if(widthi>1000){
									width = 1000;
								}else{
									width = widthi;
								}
								if(widthi!=""){
								ds=', '+widthi+'x'+heighti;
								}else{ds='';}
								if(st=="bravica"){jkd="style='height:157px;'"}else{jkd='';}
                               result += '<li '+jkd+'><span></span><a href="'+url+'"  target="_blank" title="'+title+'" ><img src="'+turl+'" width="'+widtht+'" height="'+heightt+'" alt="'+title+'"   style="padding-right: 5px" class=img /></a>';
        						result += '<br />'+text+'<font style="font-size:11px;color:#4C4C4C"> '+ds+'</font><br /><a href="'+curl+'" title="'+title+'" target="_blank" style="color:#008600">'+vurl+'</a></li>';  
							
								
        					}
        				);
						
						result += '<li style="width:900px;height:5px"></li></ul>';
						names = 'изображений';
				        break;
				    case 'video':
						result += '<table>';
				        $.each(data.results,
							function(i, val) {
								title=val.title;
								purl=val.playUrl;
								ntitle=val.titleNoFormatting;
								text=val.content;
								autht=val.videoType;
								turl=val.tbUrl;
								t = title.replace('\"', '');
								t = t.replace('"', '');
								t = t.replace('\'', '');
                                result += '<tr><td align=center valign="top"><a href="'+purl+'" title="'+ntitle+'" target="_blank" ><img src="'+turl+'" width="160" alt=\''+ntitle+'\'  style="padding: 2px;margin:5px;" class=img /></a></td>';
        						result += '<td><span><b>'+title+'</b><div style="padding-left:3px"><span style="font-size:11px;color:#787878"><b style="color:#4E91CC">'+s_to_m(val.duration)+'</b>';
								if(val.published!=""){
								result += ' - '+dateto(val.published);
								}
								result += '</span><br/>'+text+'<br /><a href="'+purl+'" title="'+ntitle+'" target="_blank"  style="color:#008600">'+autht+'</a></span></div></td></tr>';  

        					}
							
							
							
							
							
        				);
						result += '</table>';
						names = 'видеороликов';
				        break;
					case 'news':
				        $.each(data.results,
        					function(i, val) {
							urlu=val.unescapedUrl;
							urli=val.url;
							urlv=parseUri(val.unescapedUrl);

							url = urlu.replace(/^http(s*):\/\//, "");
							url = url.replace(urlv, "<a href=\"/search:web:"+encodeURIComponent(q)+" site:"+urlv+"\" onClick=\"qsd('"+urlv+"');return false;\" title='Поиск по этому домену' style='color:#018601;text-decoration:none' title='Поиск по этому сайту'>"+urlv+"</a>");
									urlx = url.replace(/\/$/g,"");
									
									
        						result += '<li><span style="background-image:url(http://'+parseUri(val.unescapedUrl)+'/favicon.ico);margin-left:-50px;margin-right:30px;margin-bottom:-3px;width:16px;height:16px"> &nbsp; &nbsp; </span><a href="'+val.unescapedUrl+'" title="'+val.unescapedUrl+'" target="_blank" style="font-size:15px">'+val.title+"</a><br /><span style='color:#787878;'>"+dateto(val.publishedDate)+"</span><br /> <b  style='color:#07519A;text-decoration:none'>"+val.publisher+"</b> - "+val.content+"<br /><span style='color:#638696;font-size:12px'>"+filet(urli)+urlx+"</span></li><br />"; 
        					}
        				);
						names = 'новостей';
				        break;
					case 'blogs':
				        $.each(data.results,
        					function(i, val) {
							
							urlu=val.postUrl;
							urli=val.postUrl;
							urlv=parseUri(val.postUrl);

							url = urlu.replace(/^http(s*):\/\//, "");
							url = url.replace(urlv, "<a href=\"#\" onClick=\"find('"+q+"','"+urlv+"','','"+urlu+"');return false;\" title='Поиск по этому домену' style='color:#018601;text-decoration:none' title='Поиск по этому сайту'>"+urlv+"</a>");
									urlx = url.replace(/\/$/g,"");
									
									
        						result += '<li><span style="background-image:url(http://'+parseUri(val.blogUrl)+'/favicon.ico);margin-left:-50px;margin-right:30px;margin-bottom:-3px;width:16px;height:16px"> &nbsp; &nbsp; </span><a href="'+val.postUrl+'" title="'+val.blogUrl+'" target="_blank" style="font-size:15px">'+val.title+"</a><br /><span style='color:#787878;'>"+dateto(val.publishedDate)+"</span><br /> <b  style='color:#07519A;text-decoration:none'>"+val.author+"</b> - "+val.content+"<br /><span style='color:#638696;font-size:12px'>"+filet(urli)+urlx+"</span></li><br />"; 
        					}
        				);
						names = 'записей';
				        break;
				    case 'web':
				    default:
				        $.each(data.results,
        					function(i, val) {

								urlu=val.unescapedUrl;
								urlv=val.visibleUrl;
								urli=urlu;
								if(st!="biz"){
									text=val.content;
									title=val.title;
								}else{text=kk(val.content,q);title=kk(val.title,q);}
									
								url = urlu.replace(/^http(s*):\/\//, "");
								url2 = url;
								url = Url.decode(url);
								urlc = url.replace(urlv, "");
								if(urlc.length>80){
									url =  url.substr(0,80)+"...";
								}
								v = start+i;
								
								url = url.replace(urlv, "<a href=\"/search:web:"+encodeURIComponent(q)+" site:"+urlv+"\" onClick=\"find('"+q+"','"+urlv+"','"+v+"','"+urlu+"');return false;\" title='Поиск по этому домену' style='color:#018601;text-decoration:none' title='Поиск по этому сайту'>"+urlv+"</a>");
								url = url.replace("www.","");
									urlx = url.replace(/\/$/g,"");
									link = urli;
									var aghx='';
									if(st=="ym"){
										if(val.Y>0){yanj="y";}else{yanj="yn";}
										if(val.G>0){gogj="g";}else{gogj="gn";}
										if(val.B>0){binj="b";}else{binj="bn";}
										
										aghx="<div style='font-size:11px;position:absolute;margin-left:770px;color:#828282;margin-top:-15px'><img src='images/r/"+yanj+".png' style='margin-bottom:-3px'> "+val.Y+" <img src='images/r/"+gogj+".png' style='margin-bottom:-3px;margin-left:5px'> "+val.G+" <img src='images/r/"+binj+".png' style='margin-bottom:-3px;margin-left:5px'> "+val.B+"</div>";
										//text=kk(text,qz);val.title=kk(val.title,qz); 
									}						
	        						result += '<li id="l'+v+'" ><span style="background-image:url(http://'+urlv+'/favicon.ico);margin-left:-48px;margin-right:32px;margin-bottom:-3px;width:16px;height:16px"> &nbsp; &nbsp; </span><a href="'+link+'"  target="_blank" style="font-size:16px" id="a'+v+'">'+title+"</a> <img src='http://qwate.kz/m.php?q="+urlv+"' width=23 height=16 style='margin-bottom:-3px'>	 "+aghx+" 		<br /><span onClick=\"info('"+v+"','"+urlv+"','"+urli+"','"+val.cacheUrl+"','"+q+"')\" id='c"+v+"' style='cursor:help;'>"+text+"</span><br /><div id='s"+v+"' style='display:none;'></div><span style='color:#557481;font-size:12px'>"+filet(urli)+urlx+" </span></li><div id='z"+v+"' style='display:none;'></div><br />"; 
								
        					}
        				);
						names = 'страниц';
				        break;
						
					
				}
			if (res && res != 'undefined') {
				
			
				if(type != "images"){
					var ds = 'border-bottom:1px solid #ccc;';
					resv.style.width = "700px";
				
				}else{var ds = '';resv.style.width = "800";}
					 $("#gads iframe").appendTo('#gads');
					 $("#yands iframe").appendTo('#yands');
					
				
				if(next == true){
					resv.innerHTML += "<a name='r_"+start+"'></a><ol start=\""+(start+1)+"\" style='display:none;padding-top:13px;"+ds+"margin-top:0px;margin-bottom:0px;' id='r_"+start+"'>"+result+"</ol>";
								
					$("#r_"+start).slideToggle("fast");
						
					 
	
					start = start + pj;
					if(start>=56 && st=='goz'){
						nexw = false;
					}else{nexw=true;}
					if(nexw && start<res){
						if(window.opt['oscroll']==0){
							nextr.innerHTML = " &nbsp; &nbsp; <span>&larr;</span> <a  title='Результат "+(start-pj)+"' href='#Предыдущие' onClick=\"scrollToElement('r_"+(start-(pj*2))+"\');return false;\">Предыдущие</a>  &nbsp; &nbsp;  &nbsp; <a id='next' href='#Еще результаты' onClick=\"Google("+start+",true);return false;\">Ещё результаты</a>   <span>&rarr;</span> <div style='display:block;padding-left:510px;margin-top:-18px;'><span>&uarr;</span>  <a href='#Вверх' onClick=\"scrollToElement('top\');return false;\">Вверх</a></div>";
						}else{
							nextr.innerHTML = " &nbsp; &nbsp; <span>&larr;</span> <a href='#r_"+(start-(pj*2))+"'>Предыдущие</a>  &nbsp; &nbsp;  &nbsp; <a id='next' href='#Еще результаты' onClick=\"Google("+start+",true);return false;\">Еще результаты</a>   <span>&rarr;</span> <div style='display:block;padding-left:510px;margin-top:-18px;'><span>&uarr;</span>  <a  href='#top'>Вверх</a></div>";
						}

					}
					else{
						if(window.opt['oscroll']==0){
							nextr.innerHTML = " <div style='display:block;padding-left:510px'><span>&uarr;</span>  <a href='#Вверх' onClick=\"scrollToElement('top\');return false;\">Вверх</a></div>";
						}else{
							nextr.innerHTML = " <div style='display:block;padding-left:510px'><span>&uarr;</span>  <a  href='#top'>Вверх</a></div>";
						}
					}
					if(window.opt['oscroll']==0){
						if(type!="images"){
							scrollToElement("scr");
						}
					}
				}
				else{
				if(st=="goz"){kr="57";}else if(st=="bravica"){kr="80";}else{kr="50";}
					if(st=="ym"){
						rez.innerHTML = '<div style="float:right;margin-bottom:-10px;"><img src="images/1/yaz.gif" style="margin-right:6px;margin-bottom:-3px" />  нашел результатов: <b>'+Comma(yandr)+ '</b>, <img src="/images/1/goz.gif" style="margin-left:20px;margin-bottom:-6px" /> : <b>'+Comma(googr)+ '</b>, <img src="images/1/biz.gif" style="margin-left:20px;margin-bottom:-6px" /> : <b>'+Comma(bingr)+ '</b>  '+names+'</div>';
					}else{
						rez.innerHTML = '<img src="images/1/'+st+'.gif" style="margin-right:6px" /> <div style="float:right;margin-bottom:-15px;"> нашел результатов: <b>'+Comma(res)+ '</b> '+names+'</div>';
					}
					resv.innerHTML = "<ol start=\""+(start+1)+"\" style='display:none;"+ds+"padding-top:10px;margin-top:0px;margin-bottom:0px;' id='r_"+start+"'><br />"+result+"</ol>";
					if(type != "images"){
					$("#r_"+start).slideToggle("fast");
					}else{$b("r_"+start).style.display = "block";}
				
	
	
					start = start + pj;
					if(start<56 && start<res){
						nextr.innerHTML = "<a id='next' title="+start+" href='#' onClick=\"Google("+start+",true);return false;\">Ещё результаты</a>   <span>&rarr;</span>";
					}else{nextr.innerHTML = '';}
				}
			}else{
			value.innerHTML = '<br style="line-height:5px" />Не найдено ни одного документа, соответствующего запросу <b>'+q+'</b><br /><br />';
			rez.innerHTML = '';
				resv.innerHTML = ""; nextr.innerHTML = "";
			}
	}	
	});
	
	
	if(next != true){
		cookie_add(st,q,e);
		var rex = '';
		 $.get("/spell.php",{ q: qz }, function(data){
		if(data!=""){
			$b("req").innerHTML = data;
			value.innerHTML = '';
			$("#req").fadeIn("fast");
		  }else{
			$("#req").fadeOut("fast");
		  }
		  }
		);


	
		
	}

	}
	
}
else{
	$b("value").innerHTML = 'Введите слово для поиска';
}

}
function Callback (func, data) {
    window[func](data);
}


var Url = {

    decode : function (string) {
        return this._utf8_decode(unescape(string));
    },


    _utf8_decode : function (utftext) {
        var string = "";
        var i = 0;
        var c = c1 = c2 = 0;

        while ( i < utftext.length ) {

            c = utftext.charCodeAt(i);

            if (c < 128) {
                string += String.fromCharCode(c);
                i++;
            }
            else if((c > 191) && (c < 224)) {
                c2 = utftext.charCodeAt(i+1);
                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
                i += 2;
            }
            else {
                c2 = utftext.charCodeAt(i+1);
                c3 = utftext.charCodeAt(i+2);
                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
                i += 3;
            }

        }

        return string;
    }

}